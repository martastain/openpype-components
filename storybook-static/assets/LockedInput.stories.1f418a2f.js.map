{"version":3,"file":"LockedInput.stories.1f418a2f.js","sources":["../../src/Inputs/LockedInput/LockedInput.tsx"],"sourcesContent":["import { forwardRef, useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport { InputText } from '../InputText'\nimport { Button } from '../../Button'\nimport { IconType } from '../../Icon'\n\nconst UsernameStyled = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 4px;\n\n  input {\n    flex: 1;\n  }\n`\n\nexport interface LockedInputProps\n  extends Omit<React.InputHTMLAttributes<HTMLDivElement>, 'onSubmit'> {\n  value: string\n  onSubmit?: (value: string) => void\n  onEdit?: () => void\n  onCancel?: () => void\n  label?: string\n  disabled?: boolean\n  saveLabel?: string\n  cancelLabel?: string\n  editIcon?: IconType\n  fullUnlock?: boolean\n  type?: React.HTMLInputTypeAttribute\n}\n\nexport const LockedInput = forwardRef<HTMLDivElement, LockedInputProps>(\n  (\n    {\n      value,\n      onSubmit,\n      onCancel,\n      onEdit,\n      label,\n      disabled,\n      saveLabel = 'Save',\n      cancelLabel = 'Cancel',\n      editIcon = 'edit',\n      fullUnlock,\n      type,\n      ...props\n    },\n    ref,\n  ) => {\n    const [editingValue, setEditingValue] = useState(value)\n    const [editing, setEditing] = useState(false)\n\n    const handleOpen = () => {\n      setEditingValue(value)\n      setEditing(true)\n    }\n\n    const handleSubmit = () => {\n      setEditing(false)\n      onSubmit && onSubmit(editingValue)\n    }\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n      setEditingValue(e.target.value)\n\n      if (fullUnlock) {\n        onSubmit && onSubmit(e.target.value)\n      }\n    }\n\n    const handleCancel = () => {\n      setEditing(false)\n      setEditingValue(value)\n      onCancel && onCancel()\n    }\n\n    // watch disabled and close editing\n    useEffect(() => {\n      if (disabled && editing) {\n        setEditing(false)\n      }\n    }, [disabled, editing])\n\n    return (\n      <UsernameStyled key={label} ref={ref} {...props}>\n        <InputText\n          value={editing ? editingValue : value}\n          disabled={!editing}\n          onChange={handleChange}\n          type={type}\n        />\n        {!disabled &&\n          (editing ? (\n            <>\n              <Button\n                icon={fullUnlock ? 'lock' : 'cancel'}\n                onClick={handleCancel}\n                label={cancelLabel}\n              />\n              {!fullUnlock && <Button icon=\"done\" onClick={handleSubmit} label={saveLabel} />}\n            </>\n          ) : (\n            <Button icon={editIcon} onClick={onEdit || handleOpen} />\n          ))}\n      </UsernameStyled>\n    )\n  },\n)\n"],"names":["UsernameStyled","styled","LockedInput","forwardRef","value","onSubmit","onCancel","onEdit","label","disabled","cancelLabel","editIcon","fullUnlock","type","ref","editingValue","setEditingValue","useState","editing","setEditing","handleOpen","handleSubmit","handleChange","e","handleCancel","useEffect","_jsxs","props","_jsx","Button","saveLabel"],"mappings":"2VAMA,MAAAA,EAAAC,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAyBOC,EAAAC,EAAA,QAAA,WAAA,CAAA,CAEH,MAAAC,EACEA,SAAAA,EACAC,SAAAA,EACAC,OAAAA,EACAC,MAAAA,EACAC,SAAAA,EACAC,UAAAA,EAAAA,OACY,YAAAC,EAAA,SACE,SAAAC,EAAA,OACH,WAAAC,EACXA,KAAAA,KACAC,CAEF,EAAAC,IAAA,CAGA,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,QAAA,SAAAb,CAAA,EACA,CAAAc,EAAAC,CAAA,EAAAF,EAAA,QAAA,SAAA,EAAA,EAEAG,EAAA,IAAA,CACEJ,EAAAA,CAAAA,EACAG,EAAAA,EAAAA,CAAe,EAGjBE,EAAA,IAAA,CACEF,EAAAA,EAAAA,EACAd,GAAAA,EAAAA,CAAAA,CAAiC,EAGnCiB,EAAAC,GAAA,CACEP,EAAAA,EAAAA,OAAAA,KAAAA,EAEAJ,GACEP,GAAAA,EAAAA,EAAAA,OAAAA,KAAAA,CACF,EAGFmB,EAAA,IAAA,CACEL,EAAAA,EAAAA,EACAH,EAAAA,CAAAA,EACAV,GAAAA,EAAAA,CAAsB,EAIxBmB,OAAAA,EAAAA,QAAAA,UAAAA,IAAAA,CACEhB,GAAAS,GACEC,EAAAA,EAAAA,CACF,EAAA,CAAAV,EAAAS,CAAA,CAAA,EAGFQ,EAAA1B,EAAA,CACiB,IAAAc,EAAaA,GAAAA,EAAca,SAAAA,CAAAA,EAAAA,EAAAA,CAC9B,MAAAT,EAAAH,EAAAX,EACwBA,SAAAA,CAAAA,EACrBc,SAAAA,EACDI,KAAAA,CACVT,CAAAA,EAAAA,CAAAA,IAAAA,EAAAA,EAAAA,EAAAA,CAIE,SAAA,CAAAe,EAAAC,EAAA,CACS,KAAAjB,EAAA,OAAA,SACuB,QAAAY,EACnBA,MAAAA,CACFd,CAAAA,EAAAA,CAAAA,GAAAA,EAAAA,EAAAA,CAEc,KAAA,OAAM,QAAAW,EAAgBA,MAAAA,CAAqBS,CAAAA,CAAAA,CAAa,CAAA,EAAAF,EAAAC,EAAA,CAG1E,KAAAlB,EAAOA,QAAAA,GAAAA,CAA6BS,CAAAA,EAAAA,CAC3C,EAAAZ,CAAA,CAGV,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}